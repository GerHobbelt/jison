/* 
 * grammar spec generated by @gerhobbelt/ebnf-parser for input file:
 *     :/1001-test.jison
 */

{
  fail: 1,
  spec: `//
// title: test idempotent transform 
//
// ...
//
// 
// function testParse(top, strings) {
//     return function() {
//         var expected = {
//             "options": {
//                 "ebnf": true
//             },
//             "ebnf": {"top": [top]},
//             "bnf": ebnf.transform({"top": [top]})
//         };
//         var grammar = "%ebnf\\n%%\\ntop : " + top + ";";
//         assert.deepEqual(bnf.parse(grammar), expected);
//     };
// }
// 
// 
// var tests = {
//     "*test idempotent transform*": function() {
//         var first = {
//             "nodelist": [["", "$$ = [];"], ["nodelist node", "$1.push($2);"]]
//         };
//         var second = ebnf.transform(JSON.parse(JSON.stringify(first)));
//         assert.deepEqual(second, first);
//     },

%ebnf
%%
nodelist 
:    /**/          {$$ = [];}
|    nodelist node {$1.push($2);}
;

`,
  err: {
    name: 'JisonParserError',
    hash: {
      errStr: 'Parsing aborted due to exception: marker is not defined',
      text: '{',
      value: '{',
      token: '"$accept"',
      token_id: 0,
      line: 33,
      expected: null,
      recoverable: false,
      state: 44,
      action: 2,
      new_state: 44,
      stack_pointer: 5,
      isParserExceptionError: true,
    },
    message: 'Parsing aborted due to exception: marker is not defined :: marker is not defined',
    stack: `ReferenceError: marker is not defined
    at Object.lexer__performAction [as performAction] (/ebnf-parser-cjs.js:12262:52)
    at Object.lexer_test_match [as test_match] (/ebnf-parser-cjs.js:11553:40)
    at Object.lexer_next [as next] (/ebnf-parser-cjs.js:11653:34)
    at Object.lexer_lex [as lex] (/ebnf-parser-cjs.js:11768:22)
    at stdLex (/ebnf-parser-cjs.js:9016:27)
    at Object.parse (/ebnf-parser-cjs.js:9213:30)
    at Object.parse (/ebnf-parser-cjs.js:23520:23)
    at Context.testEachParserExampleB (/ebnf_parse.js:314:27)
    at callFn (/runnable.js:364:21)
    at Test.Runnable.run (/runnable.js:352:5)
    at Runner.runTest (/runner.js:677:10)
    at /runner.js:801:12
    at next (/runner.js:594:14)
    at /runner.js:604:7
    at next (/runner.js:486:14)
    at cbHookRun (/runner.js:551:7)
    at done (/runnable.js:308:5)
    at callFn (/runnable.js:387:7)
    at Hook.Runnable.run (/runnable.js:352:5)
    at next (/runner.js:510:10)
    at Immediate._onImmediate (/runner.js:572:5)
    at processImmediate (/timers.js:456:21)`,
  },
}