/* 
 * grammar spec generated by @gerhobbelt/ebnf-parser for input file:
 *     :/0041-test.jison
 */

{
  fail: 1,
  spec: `// title: "%token processing"
// test_input: "F 1"
// ...
//  
%options parser-errors-are-recoverable lexer-errors-are-recoverable

%code imports %{
  import JSON5 from '@gerhobbelt/json5';            // TODO: quick fix until \`%code imports\` works in the lexer spec!
%}

%nonassoc NA NB

%left '*' '+' '?' RANGE_REGEX
%left '|'
%left '('

%token NAME_BRACE  "macro name in '{...}' curly braces"
%token TRUE FALSE DOT NULL STRING
%token <string>   IDENTIFIER
%token <value>    VALUE
%type <value>     expression
%token TOKEN_EOF 0 "end of file"
%token W 42 <int>

// You can explicitly specify the numeric code for a token kind 
// by appending a nonnegative decimal or hexadecimal integer value 
// in the field immediately following the token name:

%token NUM 300
%token XNUM 0x12d // a GNU extension

%union {              /* define stack type */
  double val;
  symrec *tptr;
}
%token <val> NUM      /* define token NUM and its type */

// You can associate a literal string token with a token kind name 
// by writing the literal string at the end of a %token declaration 
// which declares the name. For example: 

%token  <operator>  OR      "||"
%token  <operator>  LE 134  "<="

// %left <type> symbols…

// For backward compatibility, there is a confusing difference 
// between the argument lists of %token and precedence declarations. 
// Only a %token can associate a literal string with a token kind name. 
// A precedence declaration always interprets a literal string as 
// a reference to a separate token. For example: 

%left  XOR ">="         // Does not declare an alias.
%left  BANG 134 "<<" 135 // Declares 134 for BANG and 135 for "<<".

%precedence  CAT "?"     // gives only precedence to the symbols, and defines no associativity at all. Use this to define precedence only, and leave any potential conflict due to associativity enabled. 

%token
    OR     "||"
    LPAREN "("
    RPAREN ")"
    '\\n'   "end of line"
  <double>
    NUM    "number"


%option default-action-mode=skip,merge


%%

%{
    const OPTION_VALUE = 0x0001;
%}


start
    : init 'F' '1' EOF
    ;

init : ; 
`,
  err: {
    name: 'JisonParserError',
    hash: {
      errStr: `
operator token list error in an “nonassoc” associativity statement?
    
  Erroneous area:
11: %nonassoc NA NB
^^............^^
12: 
13: %left '*' '+' '?' RANGE_REGEX
    
  Technical error report:
Parse error on line 11:
%nonassoc NA NB
----------^
Expecting "STRING_LIT", "ID", "token_list", "symbol", got unexpected "OPTION_VALUE"
`,
      exception: null,
      text: 'NA',
      value: 'NA',
      token: '"$accept"',
      token_id: 0,
      line: 10,
      recoverable: false,
      state: 93,
      action: 2,
      new_state: 49,
      stack_pointer: 5,
    },
    message: `
operator token list error in an “nonassoc” associativity statement?
    
  Erroneous area:
11: %nonassoc NA NB
^^............^^
12: 
13: %left '*' '+' '?' RANGE_REGEX
    
  Technical error report:
Parse error on line 11:
%nonassoc NA NB
----------^
Expecting "STRING_LIT", "ID", "token_list", "symbol", got unexpected "OPTION_VALUE"
`,
    stack: `JisonParserError: 
operator token list error in an “nonassoc” associativity statement?
    
  Erroneous area:
11: %nonassoc NA NB
^^............^^
12: 
13: %left '*' '+' '?' RANGE_REGEX
    
  Technical error report:
Parse error on line 11:
%nonassoc NA NB
----------^
Expecting "STRING_LIT", "ID", "token_list", "symbol", got unexpected "OPTION_VALUE"

    at Object.parseError (/ebnf-parser-cjs.js:8449:15)
    at Object.yyError (/ebnf-parser-cjs.js:8634:25)
    at Object.parser__PerformAction (/ebnf-parser-cjs.js:4857:14)
    at Object.parse (/ebnf-parser-cjs.js:9703:24)
    at Object.parse (/ebnf-parser-cjs.js:23520:23)
    at Context.testEachParserExampleB (/bnf_parse.js:314:27)
    at callFn (/runnable.js:364:21)
    at Test.Runnable.run (/runnable.js:352:5)
    at Runner.runTest (/runner.js:677:10)
    at /runner.js:801:12
    at next (/runner.js:594:14)
    at /runner.js:604:7
    at next (/runner.js:486:14)
    at cbHookRun (/runner.js:551:7)
    at done (/runnable.js:308:5)
    at callFn (/runnable.js:387:7)
    at Hook.Runnable.run (/runnable.js:352:5)
    at next (/runner.js:510:10)
    at Immediate._onImmediate (/runner.js:572:5)
    at processImmediate (/timers.js:456:21)`,
  },
}